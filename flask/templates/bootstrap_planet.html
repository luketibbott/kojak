<html lang="en">
  <head>
    <script src="https://code.jquery.com/jquery-latest.js"></script>
    <script src="https://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">

    <!-- specifically for fancy sliders, like fare -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/10.2.0/bootstrap-slider.min.js"></script>
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/10.2.0/css/bootstrap-slider.min.css'/>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  </head>
  <body>

    <div class="jumbotron text-center" style="margin-bottom:0">
      <h1>What are the chances of a shelter cat or dog being adopted?</h1>
      <p>When bringing an animal in to a shelter, it's natural to wonder whether it will be adopted or not.
         Despite being a morbid question, it's important for both people bringing animals in and shelters to get an educated
         guess as to the success or failure of adoption for a given an animal. This Flask app aims to provide such an educated guess.
      </p>
    </div>

    <!-- Use navbar just as a visual divider -->
    <nav class="navbar navbar-expand-sm bg-dark navbar-dark">
    </nav>


    <!-- Main Content -->
    <div class="container">
        <br>
        
      <table>
          <tr><td>Is this animal a cat or dog?
                <select id="animal_type">
                    <option value="Cat">Cat</option>
                    <option value="Dog">Dog</option>
                </select>
          </td></tr>
          <br><br>
          <tr><td>How old is this animal in days?<input type="Number" id="age"></td></tr><br><br>
          <tr><td>Is this animal fixed or intact?
          <select id="fixed_status">
              <option value="Intact">Intact</option>
              <option value="Fixed">Fixed</option>
          </select>></td></tr>
          <br><br>
          <tr><td>Which of the following groups best describes this animal?
            <select id="group">
                <option value="short hair">Short hair</option>
                <option value="long hair">Long hair</option>
                <option value="Terrier">Terrier</option>
                <option value="Sporting">Sporting</option>
                <option value="Herding">Herding</option>
                <option value="Working">Working</option>
                <option value="Hound">Hound</option>
                <option value="Non-Sporting">Non-Sporting</option>
                <option value="long hair">Long hair</option>
            </select>></td></tr>
          <br><br>
          <tr><td>What condition best describes this animal?
            <select id="intake_condition">
              <option value="Normal">Normal</option>
              <option value="Sick">Sick</option>
              <option value="Injured">Injured</option>
              <option value="Nursing">Nursing</option>
          </select>></td></tr>
          <br><br>
          <tr><td>In what season will this animal be brought to the shelter?
              <select id="season">
                  <option value="spring">Spring</option>
                  <option value="fall">Fall</option>
                  <option value="winter">Winter</option>
                  <option value="summer">Summer</option>
              </select>
          </td></tr>
          <br><br>
          <tr><td>Which of the following reasons best describes why the animal is being brought to the shelter?
              <select id="intake_type">
                <option value=
              </select>></td></tr>
              <br><br>
          <tr><td>Model signal to noise ratio: <input type="Number" id="model_snr"></td></tr><br><br>
      </table>
      <div>
          <button id="submit">Get prediction</button>
      </div>
      <br>
      <br>
        <font size="+2">Our prediction is:
    <div>
          This candidate is <b id="hard_predict"></b><br>
          Probability of candidate being an exoplanet: <b id="soft_predict"></b>
        </font>
    </div>
    </div>
    <br>
    <br>
  </body>

  <script>
        $('#submit').click( () => { predict(); } );
      
        function predict(){
            let features = {
                'period': parseFloat($('#period').val()),
                'impact': parseFloat($('#impact').val()),
                'duration': parseFloat($('#duration').val()),
                'depth': parseFloat($('#depth').val()),
                'prad': parseFloat($('#prad').val()),
                'teq': parseFloat($('#teq').val()),
                'insol': parseFloat($('#insol').val()),
                'model_snr': parseFloat($('#model_snr').val())
            }
    
            console.log(features);
    
            $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: "/predict",  // Replace with URL of POST handler
            dataType: "json",
            async: true,
            data: JSON.stringify(features),
            success: (result) => {
                $('#hard_predict').html(result['prediction'] ? '<b>an exoplanet</b>' : '<b>not an exoplanet</b>' );
                $('#soft_predict').html(result['prob_planet']);
            },
            error: (result) => {
                alert('An error occurred')
            }
            })
    
      }
        </script>
</html>
